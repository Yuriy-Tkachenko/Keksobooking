{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://keksobooking/./source/js/photo.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/offer.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/server.js"],"sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\r\n\r\nconst userFileChooser = document.querySelector('.ad-form-header__input');\r\nconst imgUserPreview = document.querySelector('.ad-form-header__image');\r\nconst offerFileChooser = document.querySelector('.ad-form__input');\r\nconst offerPreviewWrapper = document.querySelector('.ad-form__photo');\r\nconst imgOfferPreview = document.createElement('img');\r\nofferPreviewWrapper.appendChild(imgOfferPreview);\r\n\r\nconst addPhoto = (chooser, photoWrapper) => {\r\n    chooser.addEventListener('change', () => {\r\n    const file = chooser.files[0];\r\n    const fileName = file.name.toLowerCase();\r\n    const matches = FILE_TYPES.some(\r\n      (it) => {\r\n        return fileName.endsWith(it);\r\n    });\r\n  \r\n    if (matches) {\r\n      const reader = new FileReader();\r\n      reader.addEventListener('load', () => {\r\n        photoWrapper.src = reader.result;\r\n      });\r\n  \r\n      reader.readAsDataURL(file);\r\n    }\r\n  });\r\n};\r\n   \r\naddPhoto(userFileChooser, imgUserPreview);\r\naddPhoto(offerFileChooser, imgOfferPreview);","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const IMG_WIDTH = 70;\r\nconst IMG_HEIGHT = 70;\r\nconst MIN_LENGTH = 30;\r\nconst MAX_LENGTH = 100;\r\nconst MAX_PRICE = 1000000;\r\nconst COORDINATE_ROUNDING = 5;\r\n\r\nconst MIN_PRICE = {\r\n  bungalow: '0',\r\n  flat: '1000',\r\n  hotel: '3000',\r\n  house: '5000',\r\n  palace: '10000',\r\n}\r\n\r\nconst form = document.querySelector('.ad-form');\r\nconst titleForm = form.querySelector('#title');\r\nconst typeForm = form.querySelector('#type');\r\nconst priceForm = form.querySelector('#price');\r\nconst timeInForm = form.querySelector('#timein');\r\nconst timeOutForm = form.querySelector('#timeout');\r\nconst roomForm = form.querySelector('#room_number');\r\nconst capacityForm = form.querySelector('#capacity');\r\nconst addressForm = form.querySelector('#address');\r\nconst formReset = form.querySelector('.ad-form__reset');\r\nconst adFormAvatar = document.querySelector('.ad-form-header__preview');\r\nconst adFormPhoto = document.querySelector('.ad-form__photo');\r\nconst avatarPreview = adFormAvatar.querySelector('img').cloneNode(true);\r\nconst avatarChooser = form.querySelector('#avatar');\r\nconst photoChooser = form.querySelector('#images');\r\n\r\n//Валидация полей ввода\r\nconst onTitleValue = () => {\r\n  const titleLength = titleForm.value.length;\r\n  if (titleLength < MIN_LENGTH) {\r\n    titleForm.style.borderColor = 'red';\r\n    titleForm.setCustomValidity(`Минимальная длина составляет ${MIN_LENGTH} символов`)\r\n  } else if (titleLength > MAX_LENGTH) {\r\n    titleForm.style.borderColor = 'red';\r\n    titleForm.setCustomValidity(`Максимальная длина составляет ${MAX_LENGTH} символов`)\r\n  } else {\r\n    titleForm.style.borderColor = '';\r\n    titleForm.setCustomValidity('');\r\n  }\r\n  titleForm.reportValidity();\r\n}\r\n\r\n//Настройка зависимости стоимости жилья от типа жилья\r\nconst onTypeChange = () => {\r\n  priceForm.placeholder = MIN_PRICE[typeForm.value];\r\n  priceForm.min = MIN_PRICE[typeForm.value];\r\n}\r\n\r\n//Извещения об указании допустимой цены в поле \"Цена за ночь\"\r\nconst onPriceValue = () => {\r\n  const valuePrice = priceForm.value;\r\n  if (valuePrice < MIN_PRICE[typeForm.value]) {\r\n    priceForm.style.bordercolor = 'red';\r\n    priceForm.setCustomValidity(`Минимальная цена за ночь составляет ${MIN_PRICE}`);\r\n  } else if (valuePrice > MAX_PRICE) {\r\n    priceForm.style.borderColor = 'red';\r\n    priceForm.setCustomValidity(`Максимальная цена за ночь составляет ${MAX_PRICE}`)\r\n  } else {\r\n    priceForm.style.borderColor = 'white';\r\n    priceForm.setCustomValidity('');\r\n  }\r\n\r\n  priceForm.reportValidity();\r\n}\r\n\r\n//Поле \"Время заезда\" и \"Время выезда\" снихронизовано изменят значения\r\nconst onTimeChange = () => {\r\n  timeOutForm.value = timeInForm.value;\r\n  timeInForm.value = timeOutForm.value;\r\n};\r\n\r\n//Поле \"Количество комнат\" вводит ограничения на количество гостей\r\nconst onRoomsChange = () => {\r\n  if (roomForm.value === '1' && capacityForm.value !== '1') {\r\n    capacityForm.style.borderColor = 'red';\r\n    capacityForm.setCustomValidity('В 1 комнате возможно разместить только 1 гостя');\r\n  } else if (roomForm.value === '2' && capacityForm.value !== '1' && capacityForm.value !=='2') {\r\n    capacityForm.style.borderColor = 'red';\r\n    capacityForm.setCustomValidity('В 2 комнатах возможно разместить только 2 гостей');\r\n  } else if (roomForm.value === '3' && capacityForm.value === '0') {\r\n    capacityForm.style.borderColor = 'red';\r\n    capacityForm.setCustomValidity('В 3 комнатах возможно разместить только 3 гостей');\r\n  } else if (roomForm.value === '100') {\r\n    capacityForm.style.borderColor = 'red';\r\n    capacityForm.setCustomValidity('Нет свободных номеров, в которых предусмотрено 100 комнат');\r\n  } else {\r\n    capacityForm.style.borderColor = '';\r\n    capacityForm.setCustomValidity('');\r\n  };\r\n\r\n  capacityForm.reportValidity();\r\n};\r\n\r\n//Добавление событий при нажатии на соответствующие поля\r\ntitleForm.addEventListener('input', onTitleValue);\r\ntypeForm.addEventListener('change', onTypeChange);\r\npriceForm.addEventListener('input', onPriceValue);\r\ntimeInForm.addEventListener('change', onTimeChange);\r\ntimeOutForm.addEventListener('change', onTimeChange);\r\nroomForm.addEventListener('change', onRoomsChange);\r\ncapacityForm.addEventListener('change', onRoomsChange);\r\n\r\n//Получение координат\r\nconst getAddress = ({ lat, lng }) => {\r\n  return `${lat.toFixed(5)}, ${lng.toFixed(5)}`;\r\n}\r\n\r\n//Активное состояние формы\r\nconst activateAd = () => {\r\n  form.classList.remove('ad-form--disabled');\r\n  for (let elem of FormList) {\r\n    elem.removeAttribute('disabled');\r\n  }\r\n}\r\n\r\n//Сброс данных формы при нажатии на кнопку\r\nconst formResetButton = () => {\r\n  formReset.addEventListener('click', (evt) => {\r\n    formList.reset();\r\n  })\r\n}\r\n\r\n//Сброс данных при отправке формы\r\nconst resetForm = () => {\r\n  form.reset();\r\n}\r\n\r\nexport { getAddress, resetForm }","const ALERT_SHOW_TIME = 5000;\r\n\r\nconst form = document.querySelector('.ad-form');\r\nconst formElements = form.querySelectorAll('fieldset');\r\nconst mapFilter = document.querySelector('.map__filters');\r\nconst mapFilterElements = mapFilter.querySelectorAll('.map__filter');\r\nconst mapFilterInputElements = mapFilter.querySelectorAll('.map__checkbox');\r\nconst mapFilterInputWrapper = mapFilter.querySelector('.map__features');\r\n\r\nconst elementsDisable = () => {\r\n  form.classList.add('ad-form--disabled');\r\n  mapFilter.classList.add('ad-form--disabled');\r\n  mapFilterInputWrapper.classList.add('ad-form--disabled');\r\n  setDisabledFormElements(formElements);\r\n  setDisabledFormElements(mapFilterElements);\r\n  setDisabledFormElements(mapFilterInputElements);\r\n};\r\n\r\nconst elementActivate = () => { \r\n  form.classList.remove('ad-form--disabled');\r\n  mapFilter.classList.remove('ad-form--disabled');\r\n  mapFilterInputWrapper.classList.remove('ad-form--disabled');\r\n  removeDisabledFormElements(formElements);\r\n  removeDisabledFormElements(mapFilterElements);\r\n  removeDisabledFormElements(mapFilterInputElements);\r\n}\r\n\r\nconst setDisabledFormElements = (elements) => {\r\n  elements.forEach(element => {\r\n    element.setAttribute('disabled', 'disabled');\r\n  })\r\n};\r\n\r\nconst removeDisabledFormElements = (elements) => { \r\n  elements.forEach(element => { \r\n    element.removeAttribute('disabled');\r\n  })\r\n};\r\n\r\nconst getNumDecline = (num, nominative, genitiveSingular, genitivePlural) => {\r\n  if (num > 10 && (Math.round((num % 100) / 10)) === 1) {\r\n    return genitivePlural;\r\n  } else {\r\n    switch (num % 10) {\r\n      case 1: return nominative;\r\n      case 2:\r\n      case 3:\r\n      case 4: return genitiveSingular;\r\n    }\r\n    return genitivePlural;\r\n  }\r\n};\r\n\r\nconst showErrorAlert = (message) => {\r\n  const alertContainer = document.createElement('div');\r\n  alertContainer.style.zIndex = 100;\r\n  alertContainer.style.position = 'absolute';\r\n  alertContainer.style.left = 0;\r\n  alertContainer.style.top = 0;\r\n  alertContainer.style.right = 0;\r\n  alertContainer.style.padding = '10px 3px';\r\n  alertContainer.style.fontSize = '30px';\r\n  alertContainer.style.textAlign = 'center';\r\n  alertContainer.style.backgroundColor = 'red';\r\n  \r\n  alertContainer.textContent = message;\r\n  \r\n  document.body.append(alertContainer);\r\n\r\n  setTimeout(() => {\r\n    alertContainer.remove();\r\n  }, ALERT_SHOW_TIME);\r\n}\r\n\r\nconst showSuccessAlert = (message) => {\r\n  const alertContainer = document.createElement('div');\r\n  alertContainer.style.zIndex = 100;\r\n  alertContainer.style.position = 'absolute';\r\n  alertContainer.style.left = 0;\r\n  alertContainer.style.top = 0;\r\n  alertContainer.style.right = 0;\r\n  alertContainer.style.padding = '10px 3px';\r\n  alertContainer.style.fontSize = '30px';\r\n  alertContainer.style.textAlign = 'center';\r\n  alertContainer.style.backgroundColor = 'green';\r\n  \r\n  alertContainer.textContent = message;\r\n  \r\n  document.body.append(alertContainer);\r\n\r\n  setTimeout(() => {\r\n    alertContainer.remove();\r\n  }, ALERT_SHOW_TIME);\r\n}\r\n\r\nconst onPopupEscKeydown = (evt) => {\r\n  if (isEscEvent(evt)) {\r\n    evt.preventDefault();\r\n    closeUserModal();\r\n  }\r\n};\r\n\r\nconst openUserModal = () => {\r\n  userModalElement.classList.remove('hidden');\r\n  document.addEventListener('keydown', onPopupEscKeydown);\r\n};\r\n\r\nconst closeUserModal = () => {\r\n  userModalElement.classList.add('hidden');\r\n  document.removeEventListener('keydown', onPopupEscKeydown);\r\n};\r\n\r\nexport { elementsDisable, elementActivate, getNumDecline, showErrorAlert, showSuccessAlert };","import { getNumDecline } from './util.js';\r\n\r\nconst popupTemplate = document.querySelector('#card').content.querySelector('.popup');\r\n\r\nconst renderFeatures = (features, container) => {\r\n  let featureList = container.querySelectorAll('li');\r\n\r\n  featureList.forEach((item) => {\r\n    if (features.indexOf(item.classList[1].replace('popup__feature--', '')) === -1) {\r\n      item.remove();\r\n    }\r\n  });\r\n}\r\n\r\nconst renderImages = (container, sources) => {\r\n  let popupPhoto = container.querySelector('.popup__photo');\r\n  container.innerHTML = '';\r\n\r\n  const fragmentPhoto = document.createDocumentFragment();\r\n\r\n  sources.forEach((source) => {\r\n    const newPhoto = popupPhoto.cloneNode(true);\r\n    newPhoto.src = source;\r\n    fragmentPhoto.appendChild(newPhoto);\r\n  });\r\n\r\n  return fragmentPhoto;\r\n};\r\n\r\nconst renderSimilarAdv = ({ author, offer }) => {\r\n  const popupPreview = popupTemplate.cloneNode(true);\r\n\r\n  if (offer.title) {\r\n    popupPreview.querySelector('.popup__title').textContent = offer.title;\r\n  } else {\r\n    popupPreview.querySelector('.popup__title').remove();\r\n  };\r\n  if (offer.address) {\r\n    popupPreview.querySelector('.popup__text--address').textContent = offer.address;\r\n  } else {\r\n    popupPreview.querySelector('.popup__text--address').remove();\r\n  };\r\n  if (offer.price) {\r\n    popupPreview.querySelector('.popup__text--price').textContent = `${offer.price} ₽/ночь`;\r\n  } else {\r\n    popupPreview.querySelector('.popup__text--price').remove();\r\n  };\r\n  if (offer.type) {\r\n    popupPreview.querySelector('.popup__type').textContent = offer.type;\r\n  } else {\r\n    popupPreview.querySelector('.popup__type').remove();\r\n  };\r\n  if (offer.rooms && offer.guests) {\r\n    popupPreview.querySelector('.popup__text--capacity').textContent = `${offer.rooms} ${getNumDecline(offer.rooms, 'комната', 'комнаты', 'комнат')} для ${offer.guests} ${getNumDecline(offer.guests, 'гостя', 'гостей', 'гостей')}`;\r\n  } else {\r\n    popupPreview.querySelector('.popup__text--capacity').remove();\r\n  };\r\n  if (offer.checkin && offer.checkout) {\r\n    popupPreview.querySelector('.popup__text--time').textContent = `Заезд после ${offer.checkin}, выезд до ${offer.checkout}`;\r\n  } else {\r\n    popupPreview.querySelector('.popup__text--time').remove();\r\n  };\r\n  if (offer.description) {\r\n    popupPreview.querySelector('.popup__description').textContent = offer.description;\r\n  } else {\r\n    popupPreview.querySelector('.popup__description').remove();\r\n  };\r\n  if (author.avatar) {\r\n    popupPreview.querySelector('.popup__avatar').src = author.avatar;\r\n  } else {\r\n    popupPreview.querySelector('.popup__avatar').remove();\r\n  };\r\n  if (offer.photos) {\r\n    popupPreview.querySelector('.popup__photos').appendChild(renderImages(popupPreview.querySelector('.popup__photos'), offer.photos));\r\n  } else {\r\n    popupPreview.querySelector('.popup__photos').remove();\r\n  };\r\n  if (offer.features) {\r\n    renderFeatures(offer.features, popupPreview.querySelector('.popup__features'))\r\n  } else {\r\n    popupPreview.querySelector('.popup__features').remove();\r\n  };\r\n   \r\n  return popupPreview;\r\n};\r\n\r\nexport { renderSimilarAdv };","import { elementsDisable, elementActivate } from './util.js';\r\nimport { renderSimilarAdv } from './offer.js';\r\n\r\nconst TOKYO = { lat: 35.682064, lng: 139.752136 }\r\nconst ZOOM = 14;\r\nconst addressInput = document.getElementById('address');\r\n\r\nelementsDisable()\r\n\r\nconst map = L.map('map-canvas')\r\n  .on('load', () => {\r\n    elementActivate();\r\n  })\r\n  .setView({\r\n    lat: TOKYO.lat,\r\n    lng: TOKYO.lng,\r\n  }, ZOOM);\r\n\r\nL.tileLayer(\r\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\r\n  {\r\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n  },\r\n).addTo(map);\r\n\r\n//Создаем иконку маркера пользователя\r\nconst userIcon = L.icon({\r\n  iconUrl: 'img/main-pin.svg',\r\n  iconSize: [52, 52],\r\n  iconAnchor: [26, 52],\r\n})\r\n\r\n//Создаем иконку маркера объявления\r\nconst adPinIcon = L.icon({\r\n  iconUrl: 'img/pin.svg',\r\n  iconSize: [40, 40],\r\n  iconAnchor: [20, 40],\r\n})\r\n\r\n//Создаем маркер пользователя\r\nconst userMarker = L.marker(\r\n  {\r\n    lat: TOKYO.lat,\r\n    lng: TOKYO.lng,\r\n  },\r\n  {\r\n    draggable: true,\r\n    icon: userIcon,\r\n  },\r\n);\r\n\r\nconst clearMarker = () => L.layerGroup().remove();\r\n\r\nuserMarker.on('moveend', (evt) => {\r\n  const { lat, lng } = evt.target.getLatLng();\r\n  addressInput.value = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;\r\n}).addTo(map);\r\n\r\nconst layerGroup = L.layerGroup().addTo(map);\r\n\r\nconst createMapPin = (points) => {\r\n  points.forEach((point) => {\r\n    const { location } = point;\r\n    const marker = L.marker(\r\n      {\r\n        lat: location.lat,\r\n        lng: location.lng,\r\n      },\r\n      {\r\n        icon: adPinIcon,\r\n      }\r\n    );\r\n\r\n    marker\r\n      .addTo(layerGroup)\r\n      .bindPopup(() => renderSimilarAdv(point),\r\n        {\r\n          keepInview: true,\r\n        },\r\n      );\r\n  })\r\n}\r\n\r\nexport { createMapPin, clearMarker }","import { createMapPin } from \"./map.js\"\r\n\r\nconst OFFER_QUANTITY = '10';\r\n\r\nconst mapFilters = document.querySelector('.map__filters');\r\nconst housingTypeSelect = mapFilters.querySelector('#housing-type');\r\nconst housingPriceSelect = mapFilters.querySelector('#housing-price');\r\nconst housingRoomsSelect = mapFilters.querySelector('#housing-rooms');\r\nconst housingGuestsSelect = mapFilters.querySelector('#housing-guests');\r\nconst featuresSelect = mapFilters.querySelector('.map__features');\r\n\r\nconst chooseTypes = (selectType) => {\r\n  return housingTypeSelect.value === 'any' || selectType.offer.type === housingTypeSelect.value;\r\n};\r\nconst choosePrice = (selectPrice) => {\r\n  if (housingPriceSelect.value === 'low') {\r\n    return selectPrice.offer.price < 10000;\r\n  } else if (housingPriceSelect.value === 'middle') {\r\n    return selectPrice.offer.price >= 10000 && selectPrice.offer.price <= 50000;\r\n  } else if (housingPriceSelect.value === 'high') {\r\n    return selectPrice.offer.price > 50000;\r\n  }\r\n};\r\nconst chooseRooms = (selectRooms) => {\r\n  return housingRoomsSelect.value === 'any' || selectRooms.offer.rooms.toString() === housingRoomsSelect.value;\r\n};\r\nconst chooseGuests = (selectGuests) => {\r\n  return housingGuestsSelect === 'any' || selectGuests.offer.guests.toString() === housingGuestsSelect.value;\r\n};\r\nconst chooseFeatures = (selectFeatures) => {\r\n  const checkedElement = featuresSelect.querySelectorAll('input[type=checbox]:checked');\r\n  const checkedFeatures = [].map.call(checkedElement, function (input) {\r\n    return input.value;\r\n  });\r\n  return checkedFeatures.every(function (currentFeature) {\r\n    return selectFeatures.offer.features.includes(currentFeature);\r\n  });\r\n};\r\n\r\nconst filterOffers = (offers) => {\r\n  let dataArray = [];\r\n\r\n\r\n\r\n  dataArray.push(offers);\r\n  createMapPin(dataArray);\r\n}\r\n\r\nexport { filterOffers, chooseTypes }","import { showSuccessAlert, showErrorAlert } from './util.js';\r\nimport { resetForm } from './form.js';\r\nimport { createMapPin, clearMarker } from './map.js';\r\nimport { filterOffers, chooseTypes } from './filter.js';\r\n\r\nconst OFFER_QUANTITY = '10';\r\n\r\nconst mapFilters = document.querySelector('.map__filters');\r\nconst form = document.querySelector('.ad-form');\r\nconst urls = {\r\n  GET: 'https://23.javascript.pages.academy/keksobooking/data',\r\n  POST: 'https://23.javascript.pages.academy/keksobooking',\r\n}\r\n\r\nconst GET_ERROR = 'Ошибка! Попробуйте перезагрузить страницу!';\r\nconst POST_ERROR = 'Не удалось отправить форму. Попробуйте еще раз.';\r\nconst POST_OK = 'Форма успешно отправлена!';\r\n\r\nconst getData = (onSuccess) => {\r\n  fetch(urls.GET)\r\n    .then((responce) => responce.json())\r\n    .then((offers) => {\r\n      createMapPin(offers.slice(0, OFFER_QUANTITY));\r\n      /*mapFilters.addEventListener('change', () => {\r\n        offers.filter(chooseTypes)\r\n      })*/\r\n    })\r\n    .catch(() => {\r\n      showErrorAlert(GET_ERROR)\r\n    })\r\n};\r\n\r\ngetData();\r\n\r\nconst sendData = (onSuccess, onError) => {\r\n  form.addEventListener('submit', (evt) => {\r\n    evt.preventDefault();\r\n    const formData = new FormData(evt.target);\r\n\r\n    fetch(\r\n      urls.POST, \r\n      {\r\n        method: 'POST',\r\n        body: formData,\r\n      },\r\n    )\r\n    .then(() => onSuccess())\r\n    .catch(() => onError())\r\n  });\r\n};\r\n\r\nconst successPost = () => {\r\n  showSuccessAlert(POST_OK);\r\n  resetForm()\r\n}\r\n\r\nconst errorPost = () => {\r\n  showErrorAlert(POST_ERROR);\r\n  resetForm();\r\n}\r\n\r\nsendData(successPost, errorPost);\r\n\r\nexport { getData, sendData };"],"names":["FILE_TYPES","userFileChooser","document","querySelector","imgUserPreview","offerFileChooser","offerPreviewWrapper","imgOfferPreview","createElement","appendChild","addPhoto","chooser","photoWrapper","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","MIN_PRICE","bungalow","flat","hotel","house","palace","titleForm","typeForm","priceForm","timeInForm","timeOutForm","roomForm","capacityForm","adFormAvatar","onTimeChange","cloneNode","value","onRoomsChange","style","borderColor","setCustomValidity","reportValidity","titleLength","length","placeholder","min","valuePrice","bordercolor","resetForm","reset","formElements","querySelectorAll","mapFilter","mapFilterElements","mapFilterInputElements","mapFilterInputWrapper","setDisabledFormElements","elements","forEach","element","setAttribute","removeDisabledFormElements","removeAttribute","getNumDecline","num","nominative","genitiveSingular","genitivePlural","Math","round","showErrorAlert","message","alertContainer","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","textContent","body","append","setTimeout","remove","popupTemplate","content","TOKYO","addressInput","getElementById","classList","add","map","L","on","setView","lat","lng","tileLayer","attribution","addTo","userIcon","icon","iconUrl","iconSize","iconAnchor","adPinIcon","marker","draggable","evt","target","getLatLng","toFixed","layerGroup","mapFilters","onSuccess","onError","fetch","then","responce","json","offers","slice","point","location","bindPopup","author","offer","popupPreview","features","title","address","price","type","rooms","guests","checkin","checkout","description","avatar","photos","container","sources","popupPhoto","innerHTML","fragmentPhoto","createDocumentFragment","source","newPhoto","renderImages","item","indexOf","replace","renderSimilarAdv","keepInview","catch","showSuccessAlert","preventDefault","formData","FormData","method"],"sourceRoot":""}